<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes, viewport-fit=cover">
  <title>Grace, our beautiful love story ‚ù§Ô∏è</title>
  <!-- Tailwind + Material Icons (primary) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0,1" />
  <!-- Romantic fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(-45deg, #8B0000, #C71585, #DB7093, #FFB6C1, #FF69B4);
      background-size: 400% 400%;
      animation: gradientBG 20s ease infinite;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Floating icons background (Material Icons) */
    .icon-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .floating-icon {
      position: absolute;
      color: rgba(255, 255, 255, 0.6);
      animation: floatIcon linear infinite;
      text-shadow: 0 0 20px rgba(255, 105, 180, 0.8);
      font-size: 24px;
    }

    @keyframes floatIcon {
      0% { transform: translateY(100vh) scale(0.3) rotate(0deg); opacity: 0; }
      20% { opacity: 0.8; }
      80% { opacity: 0.8; }
      100% { transform: translateY(-20vh) scale(1.2) rotate(360deg); opacity: 0; }
    }

    /* Main envelope styling */
    .love-letter-container {
      perspective: 2000px;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .envelope {
      position: relative;
      width: 100%;
      max-width: 600px;
      cursor: pointer;
      transition: transform 0.5s;
      transform-style: preserve-3d;
      animation: floatLetter 4s ease-in-out infinite;
    }

    @keyframes floatLetter {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-15px) rotate(0.5deg); }
    }

    .envelope-front {
      background: linear-gradient(145deg, #ff69b4, #ff1493, #c71585);
      border-radius: 40px 40px 20px 20px;
      padding: 40px 30px;
      box-shadow: 0 30px 50px rgba(139, 0, 0, 0.5), 0 0 0 4px rgba(255, 255, 255, 0.6) inset;
      position: relative;
      overflow: hidden;
      border: 2px solid white;
    }

    .envelope-flap {
      position: absolute;
      top: -30px;
      left: 0;
      right: 0;
      height: 60px;
      background: linear-gradient(145deg, #ff1493, #ff69b4);
      border-radius: 30px 30px 0 0;
      border: 2px solid white;
      border-bottom: none;
      transform-origin: bottom;
      transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .envelope.opened .envelope-flap {
      transform: rotateX(180deg);
    }

    .open-text {
      font-family: 'Great Vibes', cursive;
      font-size: 4.5rem;
      color: white;
      text-shadow: 0 5px 15px rgba(0,0,0,0.3), 0 0 30px gold, 0 0 50px #ffd700;
      animation: glowPulse 2s infinite;
      margin: 20px 0;
    }

    @keyframes glowPulse {
      0%, 100% { text-shadow: 0 5px 15px rgba(0,0,0,0.3), 0 0 30px gold; }
      50% { text-shadow: 0 5px 30px rgba(0,0,0,0.5), 0 0 60px #ffd700, 0 0 90px #ff69b4; }
    }

    .sub-text {
      font-family: 'Dancing Script', cursive;
      font-size: 2rem;
      color: #fff0f5;
      margin-bottom: 30px;
    }

    /* Icon decorations (instead of emojis) */
    .icon-decor {
      position: absolute;
      color: white;
      font-size: 3rem;
      animation: iconWobble 3s infinite;
    }

    @keyframes iconWobble {
      0%, 100% { transform: rotate(0deg) scale(1); }
      33% { transform: rotate(5deg) scale(1.1); }
      66% { transform: rotate(-5deg) scale(1.1); }
    }

    /* Letter content */
    .letter-content {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      border-radius: 40px;
      padding: 40px 30px;
      margin-top: 40px;
      box-shadow: 0 30px 60px rgba(199, 21, 133, 0.3);
      transform-origin: top;
      animation: contentAppear 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      border: 3px solid #ffb6c1;
      position: relative;
    }

    @keyframes contentAppear {
      0% { transform: scaleY(0) translateY(-50px); opacity: 0; }
      100% { transform: scaleY(1) translateY(0); opacity: 1; }
    }

    /* I LOVE YOU explosion with icons */
    .love-explosion {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
      pointer-events: none;
    }

    .love-particle {
      position: absolute;
      font-family: 'Material Symbols Outlined';
      font-size: 3rem;
      color: white;
      text-shadow: 0 0 30px #ff1493, 0 0 60px gold;
      animation: explode 2s forwards;
      white-space: nowrap;
    }

    @keyframes explode {
      0% { transform: scale(0) rotate(0deg); opacity: 1; }
      100% { transform: scale(2) rotate(720deg) translate(var(--x), var(--y)); opacity: 0; }
    }

    /* Love story cards */
    .story-card {
      background: linear-gradient(135deg, #fff9f9, #fff0f5);
      border-radius: 24px;
      padding: 25px;
      border-left: 8px solid #ff1493;
      box-shadow: 0 15px 25px rgba(255, 20, 147, 0.15);
      transition: all 0.3s;
      margin-bottom: 20px;
    }

    .story-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 25px 35px rgba(255, 20, 147, 0.25);
    }

    /* Icon styles */
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    .icon-heart { color: #ff1493; }
    .icon-rose { color: #c71585; }
    .icon-star { color: gold; }

    /* Romantic divider */
    .divider {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin: 30px 0;
    }
    .divider-line {
      height: 2px;
      flex: 1;
      background: linear-gradient(90deg, transparent, #ff69b4, transparent);
    }

    /* Floating animations */
    .float-1 { animation: float 3s ease-in-out infinite; }
    .float-2 { animation: float 4s ease-in-out infinite 0.5s; }
    .float-3 { animation: float 5s ease-in-out infinite 1s; }
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(2deg); }
    }

    /* Heart beat */
    .heart-beat {
      animation: heartBeat 1.4s ease-in-out infinite;
    }
    @keyframes heartBeat {
      0% { transform: scale(1); }
      14% { transform: scale(1.2); }
      28% { transform: scale(1); }
      42% { transform: scale(1.2); }
      70% { transform: scale(1); }
    }

    /* Sparkle effect */
    .sparkle {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: gold;
      animation: sparkle 2s infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    /* Rose petal */
    .petal {
      position: absolute;
      width: 25px;
      height: 25px;
      background: #ffb6c1;
      border-radius: 80% 0 55% 0;
      transform: rotate(-45deg);
      opacity: 0.5;
      animation: petalFall 6s linear infinite;
    }

    @keyframes petalFall {
      0% { transform: translateY(-10vh) rotate(0deg); opacity: 0.5; }
      100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
    }

    /* Message card */
    .message-card {
      background: white;
      border-radius: 24px;
      padding: 20px;
      box-shadow: 0 10px 20px rgba(255, 20, 147, 0.1);
      border: 1px solid #ffb6c1;
    }
  </style>
</head>
<body>

  <!-- Floating icons background (all Material Icons) -->
  <div class="icon-bg" id="iconCanvas"></div>

  <!-- Rose petals -->
  <div id="petals"></div>

  <!-- Main Love Letter Container -->
  <div class="love-letter-container relative z-10">
    <div class="envelope" id="envelope" onclick="openLetter()">
      
      <!-- Envelope front -->
      <div class="envelope-front text-center relative">
        <div class="envelope-flap" id="envelopeFlap"></div>
        
        <!-- Icon decorations (instead of emoji hearts) -->
        <span class="material-symbols-outlined icon-decor" style="top: 20px; left: 20px; font-size: 3rem;">favorite</span>
        <span class="material-symbols-outlined icon-decor" style="bottom: 20px; right: 20px; font-size: 3rem;">heart_plus</span>
        <span class="material-symbols-outlined icon-decor" style="top: 20px; right: 20px; font-size: 3rem;">ecg_heart</span>
        <span class="material-symbols-outlined icon-decor" style="bottom: 20px; left: 20px; font-size: 3rem;">heart_check</span>
        
        <!-- BIG OPEN ME TEXT -->
        <div class="open-text heart-beat">
          OPEN ME
        </div>
        
        <div class="sub-text float-2">
          my love, this is for you
        </div>
        
        <div class="flex justify-center gap-6 mt-6">
          <span class="material-symbols-outlined text-5xl text-white float-1">mail</span>
          <span class="material-symbols-outlined text-5xl text-white float-2">love_letter</span>
          <span class="material-symbols-outlined text-5xl text-white float-3">local_florist</span>
        </div>
        
        <p class="text-white mt-6 text-sm opacity-90 flex items-center justify-center gap-2">
          <span class="material-symbols-outlined text-base">touch_app</span>
          tap gently, my love
          <span class="material-symbols-outlined text-base">auto_awesome</span>
        </p>
      </div>
      
      <!-- Letter content (hidden initially) -->
      <div id="letterContent" class="letter-content hidden">
        
        <div class="text-center">
          
          <!-- Header with icons -->
          <div class="flex justify-center gap-4 mb-6">
            <span class="material-symbols-outlined text-5xl icon-heart heart-beat">favorite</span>
            <span class="material-symbols-outlined text-5xl icon-rose">rose</span>
            <span class="material-symbols-outlined text-5xl icon-heart heart-beat">favorite</span>
          </div>
          
          <h1 class="font-['Great_Vibes'] text-6xl text-red-600 mb-2">
            I Love You
          </h1>
          
          <h2 class="font-['Dancing_Script'] text-4xl text-pink-500 mb-6">
            My Dearest Grace
          </h2>
          
          <!-- Our Real Love Story (this will make her smile) -->
          <div class="story-card">
            <div class="flex items-center gap-3 mb-4">
              <span class="material-symbols-outlined text-4xl icon-heart">history</span>
              <h3 class="font-['Dancing_Script'] text-3xl text-pink-600">How We Met</h3>
            </div>
            <p class="text-gray-700 leading-relaxed">
              <span class="material-symbols-outlined text-sm align-middle">calendar_month</span> It was a sunny afternoon in Dar es Salaam. I was at a small caf√© near the university, 
              struggling with some code on my laptop. You walked in with your friends, laughing about something, 
              and when you smiled at me while ordering coffee... my heart just stopped. ‚òï
            </p>
            <p class="text-gray-700 mt-3 leading-relaxed">
              <span class="material-symbols-outlined text-sm align-middle">chat</span> You asked me what I was working on, and I showed you my latest project. 
              You actually seemed interested! We talked for hours about tech, life, and dreams. 
              By the time the caf√© closed, I knew I had found someone special.
            </p>
          </div>

          <div class="story-card">
            <div class="flex items-center gap-3 mb-4">
              <span class="material-symbols-outlined text-4xl icon-rose">celebration</span>
              <h3 class="font-['Dancing_Script'] text-3xl text-pink-600">Our First Date</h3>
            </div>
            <p class="text-gray-700 leading-relaxed">
              <span class="material-symbols-outlined text-sm align-middle">beach_access</span> I took you to Coco Beach at sunset. You wore a beautiful blue dress that matched the ocean. 
              We walked along the shore, collected seashells, and you told me about your dream to become a 
              successful businesswoman. The way your eyes sparkled when you talked about your dreams... 
              I knew I wanted to be part of your journey. üåÖ
            </p>
          </div>

          <div class="story-card">
            <div class="flex items-center gap-3 mb-4">
              <span class="material-symbols-outlined text-4xl icon-heart">volunteer_activism</span>
              <h3 class="font-['Dancing_Script'] text-3xl text-pink-600">The Moment I Knew</h3>
            </div>
            <p class="text-gray-700 leading-relaxed">
              <span class="material-symbols-outlined text-sm align-middle">rainy</span> It was raining heavily one evening, and you called me because you were stuck at a bus stop. 
              I ran through the rain to bring you an umbrella. When I got there, soaking wet, you laughed and said 
              "You're crazy!" But then you hugged me so tight, and whispered "Thank you for always being there." 
              Right there, in the rain, I knew you were the one. üåßÔ∏è‚òî
            </p>
          </div>
          
          <!-- Romantic divider with icons -->
          <div class="divider">
            <span class="material-symbols-outlined text-pink-400">stars</span>
            <div class="divider-line"></div>
            <span class="material-symbols-outlined text-pink-400">favorite</span>
            <div class="divider-line"></div>
            <span class="material-symbols-outlined text-pink-400">stars</span>
          </div>
          
          <!-- Why I love you with icons -->
          <h3 class="font-['Dancing_Script'] text-3xl text-pink-600 mb-4">Why You're Special</h3>
          
          <div class="grid grid-cols-2 gap-3 mb-6">
            <div class="message-card flex items-center gap-2">
              <span class="material-symbols-outlined icon-heart">sentiment_satisfied</span>
              <span class="text-sm">Your beautiful smile</span>
            </div>
            <div class="message-card flex items-center gap-2">
              <span class="material-symbols-outlined icon-rose">elderly_woman</span>
              <span class="text-sm">Your kind heart</span>
            </div>
            <div class="message-card flex items-center gap-2">
              <span class="material-symbols-outlined icon-heart">humerus</span>
              <span class="text-sm">Your sense of humor</span>
            </div>
            <div class="message-card flex items-center gap-2">
              <span class="material-symbols-outlined icon-rose">psychology</span>
              <span class="text-sm">Your beautiful mind</span>
            </div>
            <div class="message-card flex items-center gap-2">
              <span class="material-symbols-outlined icon-heart">diversity_3</span>
              <span class="text-sm">Your caring nature</span>
            </div>
            <div class="message-card flex items-center gap-2">
              <span class="material-symbols-outlined icon-rose">spa</span>
              <span class="text-sm">Your beautiful soul</span>
            </div>
          </div>
          
          <!-- Love letter message -->
          <div class="bg-pink-50 p-6 rounded-3xl border-2 border-pink-200 my-6">
            <span class="material-symbols-outlined text-4xl icon-heart block mb-2">love_letter</span>
            <p class="italic text-gray-700 text-lg">
              "Grace, you are the most beautiful thing that has ever happened to me. 
              Every day with you feels like a gift, every moment a treasure. 
              I love you more than all the stars in the sky, more than all the 
              roses in the world, more than words can ever say."
            </p>
          </div>
          
          <!-- Promise with icons -->
          <div class="mt-6">
            <p class="text-red-500 font-bold text-xl mb-3">I Promise To:</p>
            <div class="flex flex-wrap justify-center gap-3">
              <span class="bg-pink-100 px-4 py-2 rounded-full text-sm flex items-center gap-1">
                <span class="material-symbols-outlined text-pink-500 text-base">favorite</span> Love you forever
              </span>
              <span class="bg-pink-100 px-4 py-2 rounded-full text-sm flex items-center gap-1">
                <span class="material-symbols-outlined text-pink-500 text-base">lock</span> Be faithful
              </span>
              <span class="bg-pink-100 px-4 py-2 rounded-full text-sm flex items-center gap-1">
                <span class="material-symbols-outlined text-pink-500 text-base">hug</span> Always hug you
              </span>
              <span class="bg-pink-100 px-4 py-2 rounded-full text-sm flex items-center gap-1">
                <span class="material-symbols-outlined text-pink-500 text-base">celebration</span> Make you smile
              </span>
            </div>
          </div>
          
          <!-- Love meter with icon -->
          <div class="mt-8">
            <div class="flex items-center justify-center gap-2">
              <span class="material-symbols-outlined text-3xl icon-heart">favorite</span>
              <span class="text-pink-600 font-medium">My love for you is</span>
              <span class="material-symbols-outlined text-3xl icon-heart">favorite</span>
            </div>
            <div class="love-meter mt-3">
              <div class="love-fill" style="width: 100%;"></div>
            </div>
            <p class="text-2xl font-['Great_Vibes'] text-red-600 mt-2">Infinite ‚ôæÔ∏è</p>
          </div>
          
          <!-- Signature with icons -->
          <div class="mt-10 pt-6 border-t-2 border-pink-200">
            <div class="flex justify-center gap-2 mb-3">
              <span class="material-symbols-outlined icon-heart">signature</span>
              <span class="material-symbols-outlined icon-rose">signature</span>
            </div>
            <p class="font-['Great_Vibes'] text-4xl text-red-600">Forever yours,</p>
            <p class="font-['Dancing_Script'] text-5xl text-pink-500 mt-2">Alhaj ‚ù§Ô∏è</p>
            <div class="flex justify-center gap-2 mt-4">
              <span class="material-symbols-outlined text-pink-400">calendar_month</span>
              <span class="text-sm text-gray-500">The day I met you - the best day of my life</span>
              <span class="material-symbols-outlined text-pink-400">celebration</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Love message popup -->
  <div id="lovePopup" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white/95 backdrop-blur-lg p-8 rounded-3xl shadow-2xl z-50 max-w-sm w-full text-center hidden border-2 border-pink-300">
    <span id="popupIcon" class="material-symbols-outlined text-7xl icon-heart block mb-4 heart-beat">favorite</span>
    <p id="popupText" class="text-xl text-pink-600 font-['Dancing_Script'] mb-4"></p>
    <button onclick="closePopup()" class="bg-pink-500 text-white px-6 py-2 rounded-full w-full pulse-glow flex items-center justify-center gap-2">
      <span class="material-symbols-outlined">close</span> Close
    </button>
  </div>
  <div id="overlay" class="fixed inset-0 bg-black/30 backdrop-blur-sm z-40 hidden" onclick="closePopup()"></div>

  <style>
    .hidden { display: none; }
    .love-meter { width: 100%; height: 25px; background: #ffe4e1; border-radius: 50px; overflow: hidden; border: 2px solid white; }
    .love-fill { height: 100%; background: linear-gradient(90deg, #ff69b4, #ff1493, #ff69b4); background-size: 200% 100%; animation: shimmer 3s infinite; }
    @keyframes shimmer { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    .pulse-glow { animation: pulseGlow 2s infinite; }
    @keyframes pulseGlow { 0% { box-shadow: 0 0 0 0 rgba(255, 105, 180, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(255, 105, 180, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 105, 180, 0); } }
  </style>

  <script>
    // Floating icons generator (Material Icons only)
    function initIcons() {
      const canvas = document.getElementById('iconCanvas');
      const icons = [
        'favorite', 'heart_plus', 'ecg_heart', 'heart_check', 'love_letter', 
        'local_florist', 'rose', 'celebration', 'volunteer_activism', 'spa',
        'diversity_3', 'hug', 'waving_hand', 'kiss', 'stars'
      ];
      
      for (let i = 0; i < 40; i++) {
        const icon = document.createElement('span');
        icon.className = 'material-symbols-outlined floating-icon';
        icon.textContent = icons[Math.floor(Math.random() * icons.length)];
        icon.style.left = Math.random() * 100 + '%';
        icon.style.animationDuration = (Math.random() * 10 + 8) + 's';
        icon.style.animationDelay = Math.random() * 5 + 's';
        icon.style.fontSize = (Math.random() * 25 + 15) + 'px';
        icon.style.opacity = 0.6;
        canvas.appendChild(icon);
      }
    }

    // Create rose petals
    function initPetals() {
      const petalsContainer = document.getElementById('petals');
      for (let i = 0; i < 20; i++) {
        const petal = document.createElement('div');
        petal.className = 'petal';
        petal.style.left = Math.random() * 100 + '%';
        petal.style.animationDuration = (Math.random() * 5 + 4) + 's';
        petal.style.animationDelay = Math.random() * 3 + 's';
        petal.style.background = `hsl(${Math.random() * 15 + 340}, 80%, 80%)`;
        petalsContainer.appendChild(petal);
      }
    }

    // I LOVE YOU explosion with icons
    function createLoveExplosion() {
      const explosionContainer = document.createElement('div');
      explosionContainer.className = 'love-explosion';
      document.body.appendChild(explosionContainer);
      
      const icons = ['favorite', 'heart_plus', 'ecg_heart', 'love_letter', 'rose', 'celebration', 'stars', 'volunteer_activism'];
      const colors = ['#ff1493', '#ff69b4', '#c71585', '#db7093', '#ffb6c1'];
      
      for (let i = 0; i < 40; i++) {
        setTimeout(() => {
          const particle = document.createElement('span');
          particle.className = 'material-symbols-outlined love-particle';
          particle.textContent = icons[Math.floor(Math.random() * icons.length)];
          particle.style.color = colors[Math.floor(Math.random() * colors.length)];
          particle.style.setProperty('--x', (Math.random() * 500 - 250) + 'px');
          particle.style.setProperty('--y', (Math.random() * 500 - 250) + 'px');
          particle.style.left = '50%';
          particle.style.top = '50%';
          particle.style.fontSize = (Math.random() * 3 + 2) + 'rem';
          explosionContainer.appendChild(particle);
          setTimeout(() => particle.remove(), 2000);
        }, i * 30);
      }
      setTimeout(() => explosionContainer.remove(), 3000);
    }

    // Confetti burst
    function createConfettiBurst() {
      for (let i = 0; i < 60; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.style.position = 'fixed';
          confetti.style.width = (Math.random() * 15 + 8) + 'px';
          confetti.style.height = (Math.random() * 15 + 8) + 'px';
          confetti.style.background = `hsl(${Math.random() * 30 + 330}, 80%, 70%)`;
          confetti.style.borderRadius = '50%';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.top = '-10px';
          confetti.style.pointerEvents = 'none';
          confetti.style.zIndex = '1000';
          confetti.style.animation = `confettiFall ${Math.random() * 2 + 2}s linear forwards`;
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 3000);
        }, i * 15);
      }
    }

    // Add confetti animation
    const style = document.createElement('style');
    style.textContent = `
      @keyframes confettiFall {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
      }
    `;
    document.head.appendChild(style);

    // Open letter function
    function openLetter() {
      const envelope = document.getElementById('envelope');
      const letterContent = document.getElementById('letterContent');
      
      if (!envelope.classList.contains('opened')) {
        envelope.classList.add('opened');
        
        setTimeout(() => {
          letterContent.classList.remove('hidden');
          
          // Explosion effects
          createLoveExplosion();
          createConfettiBurst();
          setTimeout(createConfettiBurst, 300);
          setTimeout(createConfettiBurst, 600);
          
          // Show popup messages
          setTimeout(() => showLoveMessage('welcome'), 800);
          setTimeout(() => showLoveMessage('grace'), 2000);
          setTimeout(() => showLoveMessage('story'), 3200);
          
          letterContent.scrollIntoView({ behavior: 'smooth', block: 'center' });
          
        }, 600);
      }
    }

    // Show love messages
    function showLoveMessage(type) {
      const popup = document.getElementById('lovePopup');
      const overlay = document.getElementById('overlay');
      const icon = document.getElementById('popupIcon');
      const text = document.getElementById('popupText');
      
      const messages = {
        'welcome': { icon: 'heart_check', text: 'Welcome my love! You opened my heart!' },
        'grace': { icon: 'crown', text: 'Grace, you are the queen of my heart!' },
        'story': { icon: 'auto_stories', text: 'Our story is my favorite story ever!' },
        'love': { icon: 'favorite', text: 'I LOVE YOU more than anything!' }
      };
      
      const msg = messages[type] || messages['love'];
      icon.textContent = msg.icon;
      text.textContent = msg.text;
      
      popup.classList.remove('hidden');
      overlay.classList.remove('hidden');
      
      setTimeout(closePopup, 2500);
    }

    function closePopup() {
      document.getElementById('lovePopup').classList.add('hidden');
      document.getElementById('overlay').classList.add('hidden');
    }

    // Create sparkles on click
    document.addEventListener('click', function(e) {
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const sparkle = document.createElement('div');
          sparkle.className = 'sparkle';
          sparkle.style.left = e.pageX + (Math.random() * 60 - 30) + 'px';
          sparkle.style.top = e.pageY + (Math.random() * 60 - 30) + 'px';
          sparkle.style.background = `hsl(${Math.random() * 30 + 330}, 100%, 70%)`;
          document.body.appendChild(sparkle);
          setTimeout(() => sparkle.remove(), 1000);
        }, i * 70);
      }
    });

    // Initialize everything
    window.onload = function() {
      initIcons();
      initPetals();
      
      setTimeout(() => {
        createConfettiBurst();
      }, 1000);
    };
  </script>
</body>
</html>